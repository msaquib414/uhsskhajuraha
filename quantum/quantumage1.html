<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>क्वांटम युग क्विज़ (Quantum Age Quiz)</title>
    <style>
        :root {
            --primary-color: #6d28d9; /* Deep Purple */
            --secondary-color: #4c1d95;
            --accent-color: #a78bfa;
            --bg-color: #f3f4f6;
            --text-color: #1f2937;
            --timer-bg: #e5e7eb;
            --timer-fill: #ef4444; /* Red for urgency */
            --correct-bg: #dcfce7;
            --correct-text: #166534;
            --wrong-bg: #fee2e2;
            --wrong-text: #991b1b;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            user-select: none; /* Prevent text selection */
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 700px;
            margin: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* --- Login Screen --- */
        #login-screen {
            padding: 40px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100%;
        }

        h1 { color: var(--primary-color); margin-bottom: 10px; }
        p.subtitle { color: #6b7280; margin-bottom: 30px; }

        input[type="text"] {
            padding: 15px;
            font-size: 1.1rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
            outline: none;
            transition: border 0.3s;
        }

        input[type="text"]:focus { border-color: var(--primary-color); }

        button.start-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        button.start-btn:hover { background-color: var(--secondary-color); }

        /* --- Quiz Active Screen --- */
        #quiz-screen {
            display: none;
            padding: 20px;
            height: 100%;
            flex-direction: column;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-weight: bold;
            color: #4b5563;
        }

        /* Timer Bar */
        .timer-container {
            width: 100%;
            height: 8px;
            background-color: var(--timer-bg);
            border-radius: 4px;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .timer-fill {
            height: 100%;
            background-color: var(--timer-fill);
            width: 100%;
            transition: width 1s linear;
        }

        .question-card {
            background: #fff;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 25px;
            color: #111827;
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }

        .option-btn:hover {
            border-color: var(--accent-color);
            background-color: #f5f3ff;
        }

        .option-btn.selected {
            border-color: var(--primary-color);
            background-color: #ede9fe;
            color: var(--secondary-color);
            font-weight: bold;
        }

        .circle {
            height: 20px;
            width: 20px;
            border: 2px solid #ccc;
            border-radius: 50%;
            margin-right: 15px;
            display: inline-block;
        }

        .option-btn.selected .circle {
            border-color: var(--primary-color);
            background-color: var(--primary-color);
        }

        /* --- Review Screen --- */
        #review-screen {
            display: none;
            padding: 30px;
            overflow-y: auto;
        }

        .score-header {
            text-align: center;
            background: var(--primary-color);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .review-card {
            border-bottom: 1px solid #e5e7eb;
            padding: 20px 0;
            margin-bottom: 10px;
        }

        .review-q-text {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .review-option {
            padding: 8px;
            border-radius: 4px;
            margin-bottom: 4px;
            font-size: 0.95rem;
        }

        .review-correct {
            background-color: var(--correct-bg);
            color: var(--correct-text);
            border: 1px solid var(--correct-text);
        }

        .review-wrong {
            background-color: var(--wrong-bg);
            color: var(--wrong-text);
            border: 1px solid var(--wrong-text);
            text-decoration: line-through;
        }
        
        .status-badge {
            display: inline-block;
            padding: 2px 6px;
            font-size: 0.8rem;
            border-radius: 4px;
            margin-right: 8px;
            font-weight: bold;
        }

    </style>
</head>
<body>

    <div class="container">
        <div id="login-screen">
            <h1>क्वांटम युग क्विज़</h1>
            <p class="subtitle">40 प्रश्न | प्रति प्रश्न 15 सेकंड | कार्ड मोड</p>
            <input type="text" id="student-name" placeholder="अपना नाम दर्ज करें (Student Name)" autocomplete="off">
            <button class="start-btn" onclick="startQuiz()">क्विज़ शुरू करें (Start Quiz)</button>
        </div>

        <div id="quiz-screen">
            <div class="top-bar">
                <span id="q-progress">प्रश्न 1 / 40</span>
                <span id="timer-text">15s</span>
            </div>
            
            <div class="timer-container">
                <div class="timer-fill" id="timer-bar"></div>
            </div>

            <div class="question-card">
                <div class="question-text" id="question-text">प्रश्न यहाँ आएगा...</div>
                <div class="options-list" id="options-list">
                    </div>
            </div>
        </div>

        <div id="review-screen">
            <div class="score-header">
                <h2>परिणाम (Results)</h2>
                <h1 id="final-score">0 / 40</h1>
                <p id="student-display-name"></p>
                <p>CSV डाउनलोड किया जा रहा है...</p>
            </div>
            <div id="review-list">
                </div>
        </div>
    </div>

<script>
    // --- 1. Prevent Right Click ---
    document.addEventListener('contextmenu', event => event.preventDefault());

    // --- 2. Data: 40 Questions (Balanced A=10, B=10, C=10, D=10) ---
    const quizData = [
        // A Answers (10)
        { q: "क्वांटम कंप्यूटर की मूल इकाई (Unit) क्या है?", a: "Qubit", opts: { A: "Qubit", B: "Bit", C: "Byte", D: "Pixel" }, correct: "A" },
        { q: "क्वांटम यांत्रिकी में 'अनिश्चितता का सिद्धांत' किसने दिया?", a: "हाइजेनबर्ग", opts: { A: "हाइजेनबर्ग", B: "आइंस्टीन", C: "न्यूटन", D: "बोर" }, correct: "A" },
        { q: "क्वांटम सुप्रीमेसी (Quantum Supremacy) शब्द का प्रयोग सबसे पहले किसने किया?", a: "जॉन प्रेस्किल", opts: { A: "जॉन प्रेस्किल", B: "रिचर्ड फेनमैन", C: "एलन ट्यूरिंग", D: "सत्य नडेला" }, correct: "A" },
        { q: "फोटॉन (Photon) किसका मूल कण है?", a: "प्रकाश", opts: { A: "प्रकाश", B: "ध्वनि", C: "गुरुत्वाकर्षण", D: "चुंबकत्व" }, correct: "A" },
        { q: "'श्रोडिंगर की बिल्ली' (Schrödinger's Cat) प्रयोग किस अवधारणा को समझाता है?", a: "सुपरपोज़िशन", opts: { A: "सुपरपोज़िशन", B: "एन्टैंगलमेंट", C: "टनलिंग", D: "डिकोहेरेंस" }, correct: "A" },
        { q: "2019 में किस कंपनी ने क्वांटम सुप्रीमेसी का दावा किया था?", a: "Google", opts: { A: "Google", B: "IBM", C: "Microsoft", D: "Intel" }, correct: "A" },
        { q: "क्वांटम क्रिप्टोग्राफी का मुख्य लाभ क्या है?", a: "अभेद्य सुरक्षा", opts: { A: "अभेद्य सुरक्षा", B: "कम लागत", C: "धीमी गति", D: "सरल हार्डवेयर" }, correct: "A" },
        { q: "प्लांक स्थिरांक (Planck's constant) का प्रतीक क्या है?", a: "h", opts: { A: "h", B: "c", C: "G", D: "λ" }, correct: "A" },
        { q: "कौन सा पदार्थ क्वांटम कंप्यूटर चिप्स में उपयोग किया जाता है?", a: "सुपरकंडक्टर", opts: { A: "सुपरकंडक्टर", B: "प्लास्टिक", C: "लकड़ी", D: "लोहा" }, correct: "A" },
        { q: "QKD का पूर्ण रूप क्या है?", a: "Quantum Key Distribution", opts: { A: "Quantum Key Distribution", B: "Quantum Kite Design", C: "Quick Key Data", D: "Quantum Kinetic Drive" }, correct: "A" },

        // B Answers (10)
        { q: "क्वांटम एन्टैंगलमेंट को आइंस्टीन ने क्या कहा था?", a: "Spooky action at a distance", opts: { A: "God particle", B: "Spooky action at a distance", C: "Relativity error", D: "Quantum leap" }, correct: "B" },
        { q: "प्रकाश विद्युत प्रभाव (Photoelectric effect) की व्याख्या किसने की थी?", a: "अल्बर्ट आइंस्टीन", opts: { A: "मैक्स प्लैंक", B: "अल्बर्ट आइंस्टीन", C: "मैरी क्यूरी", D: "टेस्ला" }, correct: "B" },
        { q: "क्वांटम कंप्यूटर पारंपरिक कंप्यूटर से किस कारण तेज हैं?", a: "समानांतर गणना (Parallelism)", opts: { A: "बड़ी बैटरी", B: "समानांतर गणना (Parallelism)", C: "कीबोर्ड शॉर्टकट्स", D: "सस्ता हार्डवेयर" }, correct: "B" },
        { q: "इलेक्ट्रॉन किस प्रकार का कण है?", a: "फर्मिअन", opts: { A: "बोसोन", B: "फर्मिअन", C: "ग्रेविटोन", D: "फोटॉन" }, correct: "B" },
        { q: "क्वांटम टनलिंग का उपयोग किस उपकरण में होता है?", a: "STM (माइक्रोस्कोप)", opts: { A: "टेलीस्कोप", B: "STM (माइक्रोस्कोप)", C: "रेडियो", D: "कार इंजन" }, correct: "B" },
        { q: "तरंग-कण द्वैतता (Wave-particle duality) का विचार किसने दिया?", a: "डी ब्रोगली", opts: { A: "डाल्टन", B: "डी ब्रोगली", C: "रदरफोर्ड", D: "चैडविक" }, correct: "B" },
        { q: "क्वांटम डॉट्स का उपयोग मुख्य रूप से कहाँ हो रहा है?", a: "डिस्प्ले स्क्रीन (TV)", opts: { A: "स्पीकर", B: "डिस्प्ले स्क्रीन (TV)", C: "बैटरी", D: "टायर" }, correct: "B" },
        { q: "कौन सा एल्गोरिदम क्वांटम कंप्यूटर पर एन्क्रिप्शन तोड़ सकता है?", a: "शोर का एल्गोरिदम", opts: { A: "ग्रोवर एल्गोरिदम", B: "शोर का एल्गोरिदम", C: "बबल्सॉर्ट", D: "बाइनरी सर्च" }, correct: "B" },
        { q: "परमाणु के नाभिक के चारों ओर इलेक्ट्रॉन कहाँ पाए जाते हैं?", a: "कक्षक (Orbitals)", opts: { A: "नाभिक के अंदर", B: "कक्षक (Orbitals)", C: "स्थिर बिंदु पर", D: "कहीं नहीं" }, correct: "B" },
        { q: "MRI मशीन किस क्वांटम सिद्धांत पर काम करती है?", a: "नाभिकीय चुंबकीय अनुनाद", opts: { A: "एक्स-रे विवर्तन", B: "नाभिकीय चुंबकीय अनुनाद", C: "रमन प्रभाव", D: "गुरुत्वाकर्षण" }, correct: "B" },

        // C Answers (10)
        { q: "क्वांटम यांत्रिकी का जनक किसे माना जाता है?", a: "मैक्स प्लैंक", opts: { A: "गैलिलियो", B: "हॉकिंग", C: "मैक्स प्लैंक", D: "एडिसन" }, correct: "C" },
        { q: "ग्रोवर का एल्गोरिदम (Grover's Algorithm) किस काम आता है?", a: "डेटाबेस सर्च", opts: { A: "नंबर फैक्टरिंग", B: "वीडियो एडिटिंग", C: "डेटाबेस सर्च", D: "म्यूजिक प्ले" }, correct: "C" },
        { q: "एक साथ 0 और 1 अवस्था में होने की क्षमता को क्या कहते हैं?", a: "सुपरपोज़िशन", opts: { A: "एन्टैंगलमेंट", B: "इंटरफेरेंस", C: "सुपरपोज़िशन", D: "टेलीपोर्टेशन" }, correct: "C" },
        { q: "सामान्य कंप्यूटर किस भाषा पर काम करते हैं?", a: "बाइनरी (Bits)", opts: { A: "क्वांटम", B: "हेक्सा", C: "बाइनरी (Bits)", D: "डेसिमल" }, correct: "C" },
        { q: "क्वांटम टेलीपोर्टेशन में क्या स्थानांतरित होता है?", a: "क्वांटम अवस्था (सूचना)", opts: { A: "पदार्थ", B: "ऊर्जा", C: "क्वांटम अवस्था (सूचना)", D: "द्रव्यमान" }, correct: "C" },
        { q: "सबसे ठंडा तापमान जो क्वांटम प्रयोगों के लिए आवश्यक है?", a: "परम शून्य (Absolute Zero)", opts: { A: "0 डिग्री सेल्सियस", B: "-100 डिग्री फारेनहाइट", C: "परम शून्य (Absolute Zero)", D: "कमरे का तापमान" }, correct: "C" },
        { q: "बोसोन (Boson) कण का नाम किस भारतीय वैज्ञानिक पर है?", a: "सत्येंद्र नाथ बोस", opts: { A: "सी.वी. रमन", B: "होमी भाभा", C: "सत्येंद्र नाथ बोस", D: "रामानुजन" }, correct: "C" },
        { q: "क्वांटम डिकोहेरेंस (Decoherence) का कारण क्या है?", a: "पर्यावरण के साथ संपर्क", opts: { A: "सॉफ्टवेयर बग", B: "वायरस", C: "पर्यावरण के साथ संपर्क", D: "बिजली कटौती" }, correct: "C" },
        { q: "लेजर (LASER) किस सिद्धांत पर आधारित है?", a: "उद्दीप्त उत्सर्जन", opts: { A: "अपवर्तन", B: "परावर्तन", C: "उद्दीप्त उत्सर्जन", D: "विवर्तन" }, correct: "C" },
        { q: "हिग्स बोसोन (Higgs Boson) को क्या उपनाम दिया गया है?", a: "गॉड पार्टिकल", opts: { A: "डेविल पार्टिकल", B: "घोस्ट पार्टिकल", C: "गॉड पार्टिकल", D: "सन पार्टिकल" }, correct: "C" },

        // D Answers (10)
        { q: "IBM के क्लाउड-आधारित क्वांटम कंप्यूटर का नाम क्या है?", a: "IBM Q Experience", opts: { A: "Deep Blue", B: "Watson", C: "Azure Quantum", D: "IBM Q Experience" }, correct: "D" },
        { q: "क्वांटम यांत्रिकी में 'Ψ' (Psi) क्या दर्शाता है?", a: "वेव फंक्शन", opts: { A: "ऊर्जा", B: "समय", C: "द्रव्यमान", D: "वेव फंक्शन" }, correct: "D" },
        { q: "किस देश ने दुनिया का पहला क्वांटम उपग्रह 'Micius' लॉन्च किया?", a: "चीन", opts: { A: "अमेरिका", B: "रूस", C: "भारत", D: "चीन" }, correct: "D" },
        { q: "क्वांटम कंप्यूटर को ठंडा रखने के लिए किसका उपयोग होता है?", a: "तरल हीलियम", opts: { A: "बर्फ", B: "पानी", C: "पंखे", D: "तरल हीलियम" }, correct: "D" },
        { q: "मानक मॉडल (Standard Model) किस विज्ञान से संबंधित है?", a: "कण भौतिकी", opts: { A: "जीव विज्ञान", B: "खगोल विज्ञान", C: "रसायन विज्ञान", D: "कण भौतिकी" }, correct: "D" },
        { q: "क्वांटम बिट्स की नाजुकता को क्या कहते हैं?", a: "Fragility (नाजुकता)", opts: { A: "Stability", B: "Rigidity", C: "Hardness", D: "Fragility (नाजुकता)" }, correct: "D" }, 
        { q: "प्रति-कण (Antiparticle) का द्रव्यमान अपने कण के सापेक्ष कैसा होता है?", a: "समान", opts: { A: "दोगुना", B: "आधा", C: "शून्य", D: "समान" }, correct: "D" },
        { q: "न्यूट्रॉन की खोज किसने की थी?", a: "जेम्स चैडविक", opts: { A: "थॉमसन", B: "गोल्डस्टीन", C: "बोर", D: "जेम्स चैडविक" }, correct: "D" },
        { q: "सूर्य में ऊर्जा का स्रोत क्या है (क्वांटम प्रभाव सहित)?", a: "नाभिकीय संलयन", opts: { A: "विखंडन", B: "दहन", C: "घर्षण", D: "नाभिकीय संलयन" }, correct: "D" },
        { q: "भविष्य का 'क्वांटम इंटरनेट' किस पर निर्भर करेगा?", a: "एन्टैंगलमेंट", opts: { A: "फाइबर केबल", B: "5G", C: "वाई-फाई", D: "एन्टैंगलमेंट" }, correct: "D" }
    ];

    // Shuffle Array Function
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // --- 3. App Logic ---
    let studentName = "";
    let currentQIndex = 0;
    let score = 0;
    let userAnswers = []; // Stores { qIndex, selectedOpt }
    let timerInterval;
    let timeLeft = 15;
    
    // Shuffle questions on load
    const questions = shuffle([...quizData]); // Clone and shuffle

    const loginScreen = document.getElementById('login-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const reviewScreen = document.getElementById('review-screen');
    const qTextEl = document.getElementById('question-text');
    const optionsListEl = document.getElementById('options-list');
    const timerBar = document.getElementById('timer-bar');
    const timerText = document.getElementById('timer-text');
    const qProgress = document.getElementById('q-progress');

    function startQuiz() {
        const nameInput = document.getElementById('student-name');
        if (nameInput.value.trim() === "") {
            alert("कृपया अपना नाम दर्ज करें!");
            return;
        }
        studentName = nameInput.value.trim();
        loginScreen.style.display = 'none';
        quizScreen.style.display = 'flex';
        
        loadQuestion();
    }

    function loadQuestion() {
        // Reset Timer
        clearInterval(timerInterval);
        timeLeft = 15;
        timerBar.style.width = '100%';
        timerText.textContent = "15s";
        
        if (currentQIndex >= questions.length) {
            finishQuiz();
            return;
        }

        const qData = questions[currentQIndex];
        qProgress.textContent = `प्रश्न ${currentQIndex + 1} / ${questions.length}`;
        qTextEl.textContent = `${currentQIndex + 1}. ${qData.q}`;
        
        // Render Options
        optionsListEl.innerHTML = '';
        for (const [key, val] of Object.entries(qData.opts)) {
            const btn = document.createElement('div');
            btn.className = 'option-btn';
            btn.innerHTML = `<span class="circle"></span> ${val}`;
            btn.onclick = () => selectOption(key);
            optionsListEl.appendChild(btn);
        }

        // Start Timer
        startTimer();
    }

    function startTimer() {
        timerInterval = setInterval(() => {
            timeLeft--;
            timerText.textContent = timeLeft + "s";
            const percent = (timeLeft / 15) * 100;
            timerBar.style.width = percent + "%";

            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                recordAnswer(null); // Timeout = No Answer
            }
        }, 1000);
    }

    function selectOption(key) {
        clearInterval(timerInterval);
        recordAnswer(key);
    }

    function recordAnswer(selectedKey) {
        // Save logic
        const qData = questions[currentQIndex];
        const isCorrect = selectedKey === qData.correct;
        
        if (isCorrect) score++;

        userAnswers.push({
            qIndex: currentQIndex,
            selected: selectedKey,
            correct: qData.correct,
            qText: qData.q,
            options: qData.opts,
            correctText: qData.opts[qData.correct]
        });

        // Delay slightly for UX or Move immediately
        currentQIndex++;
        loadQuestion();
    }

    function finishQuiz() {
        quizScreen.style.display = 'none';
        reviewScreen.style.display = 'block';
        
        document.getElementById('final-score').textContent = `${score} / ${questions.length}`;
        document.getElementById('student-display-name').textContent = studentName;

        renderReview();
        downloadCSV();
    }

    function renderReview() {
        const list = document.getElementById('review-list');
        list.innerHTML = '';

        userAnswers.forEach((item, index) => {
            const card = document.createElement('div');
            card.className = 'review-card';

            // Determine status
            let statusBadge = '';
            if (!item.selected) {
                statusBadge = '<span class="status-badge" style="background:#fee2e2; color:#991b1b">समय समाप्त</span>';
            } else if (item.selected === item.correct) {
                statusBadge = '<span class="status-badge" style="background:#dcfce7; color:#166534">सही</span>';
            } else {
                statusBadge = '<span class="status-badge" style="background:#fee2e2; color:#991b1b">गलत</span>';
            }

            let html = `<div class="review-q-text">${index + 1}. ${item.qText} ${statusBadge}</div>`;

            // Loop options
            for (const [key, val] of Object.entries(item.options)) {
                let className = 'review-option';
                
                // Logic for highlighting
                if (key === item.correct) {
                    className += ' review-correct'; // Always show correct in Green
                } else if (key === item.selected && key !== item.correct) {
                    className += ' review-wrong'; // Show wrong selection in Red
                }

                html += `<div class="${className}"><b>${key}:</b> ${val}</div>`;
            }

            card.innerHTML = html;
            list.appendChild(card);
        });
    }

    function downloadCSV() {
        const date = new Date().toLocaleString();
        // BOM for Hindi characters in Excel
        const csvContent = "data:text/csv;charset=utf-8,\uFEFF" 
            + "Student Name,Total Score,Date/Time\n"
            + `${studentName},${score}/${questions.length},"${date}"`;

        const encodedUri = encodeURI(csvContent);
        const link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", "result.csv");
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
</script>
</body>
</html>