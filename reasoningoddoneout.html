<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>विषम चुनें - रीजनिंग टेस्ट</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+Devanagari:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans Devanagari', sans-serif;
        }
        /* Custom styles for better radio button visibility */
        .custom-radio {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: 50%;
            width: 1.25rem;
            height: 1.25rem;
            border: 2px solid #ddd;
            transition: 0.2s all linear;
            margin-right: 0.5rem;
            position: relative;
            top: 4px;
        }
        .custom-radio:checked {
            border: 6px solid #3b82f6;
        }
        .correct-answer {
            color: #16a34a; /* Green color for correct answer */
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800" oncontextmenu="return false;">

    <!-- Timer Display -->
    <div id="timer-container" class="hidden fixed top-0 left-0 right-0 bg-blue-600 text-white py-3 px-5 text-center shadow-lg z-50">
        <h2 class="text-2xl font-bold">समय शेष: <span id="timer">25:00</span></h2>
    </div>

    <!-- Name Input Modal -->
    <div id="name-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50">
        <div class="bg-white p-8 rounded-xl shadow-2xl text-center w-11/12 max-w-md">
            <h1 class="text-3xl font-bold mb-4 text-gray-900">रीजनिंग टेस्ट में आपका स्वागत है</h1>
            <p class="text-gray-600 mb-6">शुरू करने के लिए कृपया अपना नाम दर्ज करें।</p>
            <form id="name-form">
                <input type="text" id="student-name" placeholder="अपना पूरा नाम लिखें" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6" required>
                <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition duration-300 text-lg">टेस्ट शुरू करें</button>
            </form>
        </div>
    </div>

    <!-- Quiz Container -->
    <div id="quiz-container" class="hidden container mx-auto p-4 pt-20">
        <h1 class="text-4xl font-bold text-center mb-8 text-gray-900">विषम चुनें</h1>
        <form id="quiz-form" class="bg-white p-8 rounded-xl shadow-lg space-y-8">
            <!-- Questions will be injected here by JavaScript -->
        </form>
        <div class="mt-8 text-center">
            <button id="submit-btn" type="submit" form="quiz-form" class="bg-green-600 text-white font-bold py-4 px-10 rounded-lg hover:bg-green-700 transition duration-300 text-xl shadow-md">सबमिट करें</button>
        </div>
        <div id="result" class="mt-8 text-center text-3xl font-bold"></div>
    </div>

    <script>
        // --- DATA: Questions, Options, and Answers ---
        const quizData = [
            { question: "इनमें से विषम चुनें:", options: ["सेब", "आम", "केला", "आलू"], answer: "d" },
            { question: "इनमें से विषम चुनें:", options: ["भारत", "चीन", "जापान", "न्यूयॉर्क"], answer: "d" },
            { question: "इनमें से विषम चुनें:", options: ["गाय", "शेर", "चीता", "बाघ"], answer: "a" },
            { question: "इनमें से विषम चुनें:", options: ["नदी", "झील", "तालाब", "पहाड़"], answer: "d" },
            { question: "इनमें से विषम चुनें:", options: ["क्रिकेट", "हॉकी", "शतरंज", "फुटबॉल"], answer: "c" },
            { question: "इनमें से विषम चुनें:", options: ["आँख", "नाक", "कान", "सोचना"], answer: "d" },
            { question: "इनमें से विषम चुनें:", options: ["लाल", "हरा", "नीला", "घर"], answer: "d" },
            { question: "इनमें से विषम चुनें:", options: ["कलम", "पेंसिल", "किताब", "स्याही"], answer: "c" },
            { question: "इनमें से विषम चुनें:", options: ["कार", "बस", "साइकिल", "नाव"], answer: "d" },
            { question: "इनमें से विषम चुनें:", options: ["दिल्ली", "मुंबई", "पटना", "बिहार"], answer: "d" },
            { question: "इनमें से विषम चुनें:", options: ["सोमवार", "बुधवार", "अवकाश", "शुक्रवार"], answer: "c" },
            { question: "इनमें से विषम चुनें:", options: ["गेहूँ", "चावल", "जौ", "सरसों"], answer: "d" },
            { question: "इनमें से विषम चुनें:", options: ["माता", "पिता", "भाई", "मित्र"], answer: "d" },
            { question: "इनमें से विषम चुनें:", options: ["तोता", "कबूतर", "गौरैया", "चमगादड़"], answer: "d" },
            { question: "इनमें से विषम चुनें:", options: ["लोहा", "सोना", "चाँदी", "लकड़ी"], answer: "d" },
            { question: "इनमें से विषम चुनें:", options: ["खुशी", "दुःख", "क्रोध", "सुंदर"], answer: "d" },
            { question: "इनमें से विषम चुनें:", options: ["लिखना", "पढ़ना", "खेलना", "ज्ञान"], answer: "d" },
            { question: "इनमें से विषम चुनें:", options: ["भारत", "एशिया", "अफ्रीका", "यूरोप"], answer: "a" }
        ];

        // --- DOM Elements ---
        const nameModal = document.getElementById('name-modal');
        const nameForm = document.getElementById('name-form');
        const studentNameInput = document.getElementById('student-name');
        const quizContainer = document.getElementById('quiz-container');
        const quizForm = document.getElementById('quiz-form');
        const submitBtn = document.getElementById('submit-btn');
        const resultDiv = document.getElementById('result');
        const timerDisplay = document.getElementById('timer');
        const timerContainer = document.getElementById('timer-container');

        let studentName = '';
        let timerInterval;

        // --- Functions ---

        /**
         * Loads and displays the quiz questions.
         */
        function loadQuiz() {
            let quizHTML = '';
            quizData.forEach((q, index) => {
                quizHTML += `
                    <div class="question-block border-b pb-6">
                        <p class="text-xl font-semibold mb-4">${index + 1}. ${q.question}</p>
                        <div class="space-y-2 text-lg">
                            <div>
                                <label class="flex items-center cursor-pointer">
                                    <input type="radio" name="question${index}" value="a" class="custom-radio">
                                    <span>(a) ${q.options[0]}</span>
                                </label>
                            </div>
                            <div>
                                <label class="flex items-center cursor-pointer">
                                    <input type="radio" name="question${index}" value="b" class="custom-radio">
                                    <span>(b) ${q.options[1]}</span>
                                </label>
                            </div>
                            <div>
                                <label class="flex items-center cursor-pointer">
                                    <input type="radio" name="question${index}" value="c" class="custom-radio">
                                    <span>(c) ${q.options[2]}</span>
                                </label>
                            </div>
                            <div>
                                <label class="flex items-center cursor-pointer">
                                    <input type="radio" name="question${index}" value="d" class="custom-radio">
                                    <span>(d) ${q.options[3]}</span>
                                </label>
                            </div>
                        </div>
                        <div id="answer${index}" class="mt-3 text-lg"></div>
                    </div>
                `;
            });
            quizForm.innerHTML = quizHTML;
        }

        /**
         * Starts the countdown timer.
         */
        function startTimer() {
            let time = 25 * 60; // 25 minutes in seconds
            timerInterval = setInterval(() => {
                let minutes = Math.floor(time / 60);
                let seconds = time % 60;

                seconds = seconds < 10 ? '0' + seconds : seconds;
                minutes = minutes < 10 ? '0' + minutes : minutes;

                timerDisplay.textContent = `${minutes}:${seconds}`;

                if (time <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz();
                }
                time--;
            }, 1000);
        }

        /**
         * Handles the quiz submission process.
         */
        function submitQuiz() {
            clearInterval(timerInterval); // Stop the timer
            submitBtn.disabled = true; // Disable the button
            submitBtn.classList.add('opacity-50', 'cursor-not-allowed');
            timerContainer.classList.add('bg-red-600');

            let score = 0;
            const questionBlocks = document.querySelectorAll('.question-block');

            quizData.forEach((q, index) => {
                const answerDiv = document.getElementById(`answer${index}`);
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                const correctOptionIndex = q.answer.charCodeAt(0) - 'a'.charCodeAt(0);
                const correctOptionText = q.options[correctOptionIndex];

                if (selectedOption) {
                    if (selectedOption.value === q.answer) {
                        score++;
                        questionBlocks[index].classList.add('bg-green-100', 'p-4', 'rounded-lg');
                    } else {
                        questionBlocks[index].classList.add('bg-red-100', 'p-4', 'rounded-lg');
                    }
                } else {
                    // If no option was selected
                    questionBlocks[index].classList.add('bg-yellow-100', 'p-4', 'rounded-lg');
                }
                
                // Display the correct answer
                answerDiv.innerHTML = `सही उत्तर: <span class="correct-answer">(${q.answer}) ${correctOptionText}</span>`;
            });

            resultDiv.innerHTML = `आपका स्कोर: ${score} / ${quizData.length}`;
            downloadCSV(studentName, score);
        }

        /**
         * Generates and triggers the download of a CSV file with the results.
         * @param {string} name - The student's name.
         * @param {number} score - The student's score.
         */
        function downloadCSV(name, score) {
            const csvContent = "data:text/csv;charset=utf-8," 
                + "Student Name,Marks\n" 
                + `${name},${score}`;
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "result.csv");
            document.body.appendChild(link); // Required for FF
            link.click();
            document.body.removeChild(link);
        }

        // --- Event Listeners ---

        // Handle name submission to start the quiz
        nameForm.addEventListener('submit', (e) => {
            e.preventDefault();
            studentName = studentNameInput.value.trim();
            if (studentName) {
                nameModal.classList.add('hidden');
                quizContainer.classList.remove('hidden');
                timerContainer.classList.remove('hidden');
                loadQuiz();
                startTimer();
            }
        });

        // Handle quiz form submission
        quizForm.addEventListener('submit', (e) => {
            e.preventDefault();
            submitQuiz();
        });

    </script>

</body>
</html>

