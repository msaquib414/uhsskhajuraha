<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cell Cycle and Cell Division Quiz</title>
    <style>
        :root {
            --primary-color: #007bff;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --light-bg: #f8f9fa;
            --dark-text: #343a40;
            --light-text: #ffffff;
            --border-color: #dee2e6;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #e9ecef;
            color: var(--dark-text);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        #timer {
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--primary-color);
            color: var(--light-text);
            padding: 10px 30px;
            border-radius: 0 0 15px 15px;
            font-size: 1.5em;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            z-index: 1000;
            transition: background-color 0.3s;
        }

        #quiz-container {
            max-width: 800px;
            margin: 80px auto 30px auto;
            background: var(--light-text);
            padding: 25px 30px;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }

        .header-main { text-align: center; color: var(--dark-text); margin-bottom: 20px; }

        .question-block {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .question-text {
            font-weight: bold;
            margin-bottom: 12px;
            font-size: 1.1em;
        }

        .options-container label {
            display: block;
            margin-bottom: 10px;
            padding: 12px;
            background-color: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }

        .options-container label:hover {
            background-color: #e2e6ea;
            border-color: #b1b9c1;
        }

        .options-container input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.1);
        }
        
        #submit-btn {
            display: block;
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            font-weight: bold;
            color: var(--light-text);
            background-color: var(--success-color);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        #submit-btn:hover {
            background-color: #218838;
        }

        #submit-btn:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }

        #result-display {
            text-align: center;
            font-size: 1.8em;
            font-weight: bold;
            margin-top: 20px;
            padding: 20px;
            border-radius: 5px;
            background-color: #eef7ff;
            color: #0056b3;
        }

        .correct-answer-reveal {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
            display: none; /* Initially hidden */
        }

        .correct-choice {
            background-color: #d4edda !important;
            border-color: #c3e6cb !important;
        }
        .incorrect-choice {
             background-color: #f8d7da !important;
             border-color: #f5c6cb !important;
        }

    </style>
</head>

<body oncontextmenu="return false;">

    <div id="timer">25:00</div>
    
    <div id="quiz-container">
        <h1 class="header-main">Cell Cycle & Division Quiz</h1>
        
        <form id="quiz-form">
            <div id="questions-wrapper">
                </div>
            <button type="submit" id="submit-btn">Submit</button>
        </form>
        
        <div id="result-display"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // All script logic is wrapped to run after the page is loaded
            
            const quizData = [
                // 10 questions with answer 'A'
                { q: "Which of the following is the correct sequence of phases in the cell cycle?", o: ["G1 -> S -> G2 -> M", "M -> G1 -> G2 -> S", "S -> G1 -> G2 -> M", "G1 -> G2 -> S -> M"], a: 0 },
                { q: "The condensation of chromosomes is completed and they can be observed clearly under the microscope during:", o: ["Metaphase", "Prophase", "Anaphase", "Telophase"], a: 0 },
                { q: "During which phase do the sister chromatids move towards opposite poles?", o: ["Anaphase", "Prophase", "Metaphase", "Telophase"], a: 0 },
                { q: "Crossing over is the exchange of genetic material between:", o: ["Non-sister chromatids of homologous chromosomes", "Sister chromatids of a chromosome", "Non-homologous chromosomes", "The centromeres"], a: 0 },
                { q: "In plant cells, cytokinesis occurs by the formation of a:", o: ["Cell plate", "Cleavage furrow", "Cell membrane", "Spindle fibers"], a: 0 },
                { q: "The stage of meiosis where homologous chromosomes pair up is called:", o: ["Zygotene", "Leptotene", "Pachytene", "Diplotene"], a: 0 },
                { q: "Mitosis is also known as:", o: ["Equational division", "Reductional division", "Meiotic division", "Sexual division"], a: 0 },
                { q: "The number of chromatids in a chromosome at anaphase is:", o: ["1", "2", "4", "0"], a: 0 },
                { q: "Cells that are not dividing are likely to be at:", o: ["G0 phase", "G1 phase", "S phase", "M phase"], a: 0 },
                { q: "The enzyme responsible for crossing over is:", o: ["Recombinase", "Polymerase", "Ligase", "Helicase"], a: 0 },

                // 10 questions with answer 'B'
                { q: "DNA replication or synthesis occurs during which phase?", o: ["G1 phase", "S phase", "G2 phase", "M phase"], a: 1 },
                { q: "The complex formed by a pair of synapsed homologous chromosomes is called a:", o: ["Kinetochore", "Bivalent", "Centromere", "Chromatid"], a: 1 },
                { q: "Spindle fibers are made of which protein?", o: ["Actin", "Tubulin", "Myosin", "Keratin"], a: 1 },
                { q: "The separation of homologous chromosomes occurs during:", o: ["Anaphase II", "Anaphase I", "Metaphase I", "Prophase II"], a: 1 },
                { q: "If a parent cell has 16 chromosomes, then after mitosis, each daughter cell will have:", o: ["8 chromosomes", "16 chromosomes", "32 chromosomes", "24 chromosomes"], a: 1 },
                { q: "The longest phase of the cell cycle is:", o: ["M phase", "Interphase", "Anaphase", "Telophase"], a: 1 },
                { q: "The term 'meiosis' was coined by:", o: ["Flemming", "Farmer and Moore", "Strasburger", "Watson and Crick"], a: 1 },
                { q: "The dissolution of the synaptonemal complex occurs during:", o: ["Pachytene", "Diplotene", "Zygotene", "Leptotene"], a: 1 },
                { q: "The division of the nucleus is called:", o: ["Cytokinesis", "Karyokinesis", "Interkinesis", "Synapsis"], a: 1 },
                { q: "The cell grows and carries out its normal metabolic processes during:", o: ["S phase", "G1 phase", "G2 phase", "M phase"], a: 1 },

                // 10 questions with answer 'C'
                { q: "During which phase proteins are synthesized in preparation for mitosis?", o: ["G1 phase", "S phase", "G2 phase", "M phase"], a: 2 },
                { q: "What is the point of attachment for spindle fibers on chromosomes?", o: ["Telomere", "Centriole", "Kinetochore", "Chromatin"], a: 2 },
                { q: "The X-shaped structures observed during the diplotene stage are known as:", o: ["Bivalents", "Synapses", "Chiasmata", "Kinetochores"], a: 2 },
                { q: "Which of the following events does not occur during interphase?", o: ["DNA replication", "Cell growth", "Separation of chromosomes", "Protein synthesis"], a: 2 },
                { q: "Meiosis results in the formation of:", o: ["Two diploid cells", "Two haploid cells", "Four haploid cells", "Four diploid cells"], a: 2 },
                { q: "Which of the following is responsible for holding the sister chromatids together?", o: ["Kinetochore", "Spindle fibers", "Centromere", "Telomere"], a: 2 },
                { q: "The final stage of prophase I of meiosis is:", o: ["Diplotene", "Pachytene", "Diakinesis", "Zygotene"], a: 2 },
                { q: "Which of the following induces mitosis?", o: ["Colchicine", "Gibberellin", "Cytokinin", "Auxin"], a: 2 },
                { q: "The stage between the two meiotic divisions is called:", o: ["Interphase", "Diakinesis", "Interkinesis", "Cytokinesis"], a: 2 },
                { q: "Reappearance of the nuclear envelope and nucleolus occurs during:", o: ["Prophase", "Metaphase", "Telophase", "Anaphase"], a: 2 },

                // 10 questions with answer 'D'
                { q: "The main significance of meiosis is that it:", o: ["Increases the cell number", "Aids in cell repair", "Is required for growth", "Creates genetic variation"], a: 3 },
                { q: "Colchicine is a chemical that arrests cell division at:", o: ["Prophase", "Anaphase", "Telophase", "Metaphase"], a: 3 },
                { q: "Meiosis II performs:", o: ["Separation of homologous chromosomes", "DNA replication", "Reduction of chromosome number to half", "Separation of sister chromatids"], a: 3 },
                { q: "If a diploid cell has 40 chromosomes, the number of chromosomes in its gametes will be:", o: ["40", "80", "10", "20"], a: 3 },
                { q: "The human cell cycle lasts approximately:", o: ["90 minutes", "8 hours", "12 hours", "24 hours"], a: 3 },
                { q: "Centrioles duplicate during which phase of the cell cycle?", o: ["G1 phase", "M phase", "G2 phase", "S phase"], a: 3 },
                { q: "The shortest phase of mitosis is:", o: ["Prophase", "Metaphase", "Telophase", "Anaphase"], a: 3 },
                { q: "Synapsis occurs between:", o: ["Two daughter cells", "Spindle fibers and centromere", "A male and a female gamete", "Two homologous chromosomes"], a: 3 },
                { q: "At the end of mitosis, the number of chromosomes in each daughter cell is:", o: ["Half of the parent cell", "Double the parent cell", "One-fourth of the parent cell", "Same as the parent cell"], a: 3 },
                { q: "Chromosomes decondense back into chromatin during:", o: ["Prophase", "Metaphase", "Anaphase", "Telophase"], a: 3 }
            ];

            let studentName = '';
            let timerInterval;

            const quizForm = document.getElementById('quiz-form');
            const submitBtn = document.getElementById('submit-btn');
            const resultDisplay = document.getElementById('result-display');
            const timerElement = document.getElementById('timer');
            const questionsWrapper = document.getElementById('questions-wrapper');

            function initQuiz() {
                studentName = prompt("Please enter your name:", "Student");
                if (!studentName || studentName.trim() === "") {
                    studentName = "Guest";
                }
                renderQuestions();
                startTimer(25 * 60); // 25 minutes timer
                quizForm.addEventListener('submit', handleSubmit);
            }

            function renderQuestions() {
                let quizHtml = '';
                quizData.forEach((item, index) => {
                    let optionsHtml = '';
                    item.o.forEach((option, optionIndex) => {
                        optionsHtml += `
                            <label for="q${index}_option${optionIndex}">
                                <input type="radio" name="question${index}" id="q${index}_option${optionIndex}" value="${optionIndex}">
                                ${option}
                            </label>
                        `;
                    });

                    quizHtml += `
                        <div class="question-block">
                            <div class="question-text">
                                ${index + 1}. ${item.q}
                            </div>
                            <div class="options-container">${optionsHtml}</div>
                            <div class="correct-answer-reveal" id="correct-answer-${index}"></div>
                        </div>
                    `;
                });
                questionsWrapper.innerHTML = quizHtml;
            }

            function startTimer(duration) {
                let timer = duration;
                timerInterval = setInterval(() => {
                    let minutes = parseInt(timer / 60, 10);
                    let seconds = parseInt(timer % 60, 10);

                    minutes = minutes < 10 ? "0" + minutes : minutes;
                    seconds = seconds < 10 ? "0" + seconds : seconds;

                    timerElement.textContent = `${minutes}:${seconds}`;

                    if (--timer < 0) {
                        timerElement.textContent = "Time's Up!";
                        timerElement.style.backgroundColor = 'var(--danger-color)';
                        handleSubmit();
                    }
                }, 1000);
            }

            function handleSubmit(event) {
                if (event) event.preventDefault();
                if (submitBtn.disabled) return; // Prevent multiple submissions

                clearInterval(timerInterval);
                submitBtn.disabled = true;

                let score = calculateScore();
                showResults(score);
                downloadCSV(studentName, score);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            function calculateScore() {
                let score = 0;
                quizData.forEach((item, index) => {
                    const selectedOptionNode = document.querySelector(`input[name="question${index}"]:checked`);
                    const labels = document.querySelectorAll(`label[for^="q${index}_option"]`);
                    const correctAnswerReveal = document.getElementById(`correct-answer-${index}`);
                    const correctOptionText = item.o[item.a];
                    
                    correctAnswerReveal.innerHTML = `âœ… Correct Answer: ${correctOptionText}`;
                    correctAnswerReveal.style.display = 'block';
                    labels[item.a].classList.add('correct-choice');

                    if (selectedOptionNode) {
                        const userAnswer = parseInt(selectedOptionNode.value);
                        if (userAnswer === item.a) {
                            score++;
                        } else {
                            labels[userAnswer].classList.add('incorrect-choice');
                        }
                    }
                });
                return score;
            }

            function showResults(score) {
                resultDisplay.innerHTML = `<strong>${studentName}</strong>, your score is: <strong>${score} out of ${quizData.length}</strong>`;
            }

            function downloadCSV(name, score) {
                const csvContent = "data:text/csv;charset=utf-8," 
                    + "Student Name,Score\n" 
                    + `"${name.replace(/"/g, '""')}",${score}\n`;

                const encodedUri = encodeURI(csvContent);
                const link = document.createElement("a");
                link.setAttribute("href", encodedUri);
                link.setAttribute("download", "result.csv");
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }

            // Start the quiz
            initQuiz();
        });
    </script>

</body>
</html>

